"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[837],{6837:function(t,i,e){e.r(i),e.d(i,{default:function(){return T}});var s=function(){var t=this,i=t._self._c;return i("div",[i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.visible=!t.visible}}},[t._v("打开抽屉")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.visible2=!t.visible2}}},[t._v("打开弹窗")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.visible3=!t.visible3}}},[t._v("打开Ant抽屉")]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.visible4=!t.visible4}}},[t._v("打开Ant弹窗")]),i("HistoryDrawer",{attrs:{title:"抽屉",history:{drawer:!0}},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[t._v(" El抽屉 ")]),i("HistoryDialog",{attrs:{title:"弹窗",history:{dialog:!0}},model:{value:t.visible2,callback:function(i){t.visible2=i},expression:"visible2"}},[t._v(" El弹窗 ")]),i("HistoryAntDrawer",{attrs:{title:"抽屉",history:{antDrawer:!0}},model:{value:t.visible3,callback:function(i){t.visible3=i},expression:"visible3"}},[t._v(" Ant抽屉 ")]),i("HistoryAntModal",{attrs:{title:"弹窗",history:{antModal:!0}},model:{value:t.visible4,callback:function(i){t.visible4=i},expression:"visible4"}},[t._v(" Ant弹窗 ")]),i("el-divider"),i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.visible5=!t.visible5}}},[t._v("多层抽屉")]),t._v("     "),i("el-link",[i("a",{attrs:{href:"#/?nestDrawer1=true&nestDrawer2=true&nestDialog1=true",target:"_blank"}},[t._v("打开链接（/?nestDrawer1=true&nestDrawer2=true&nestDialog1=true）")])]),i("HistoryDrawer",{attrs:{"append-to-body":"",title:"内容页",history:{nestDrawer1:!0}},model:{value:t.visible5,callback:function(i){t.visible5=i},expression:"visible5"}},[t._v(" 巴山楚水凄凉地，二十三年弃置身。"),i("br"),i("br"),t._v(" 怀旧空吟闻笛赋，到乡翻似烂柯人。"),i("br"),i("br"),t._v(" 沉舟侧畔千帆过，病树前头万木春。"),i("br"),i("br"),t._v(" 今日听君歌一曲，暂凭杯酒长精神。"),i("br"),i("br"),i("el-button",{on:{click:function(i){t.visible6=!t.visible6}}},[t._v("个人信息")]),t._v("   "),i("router-link",{attrs:{to:"/A"}},[i("el-button",{attrs:{type:"success"}},[t._v("跳转页面")])],1),i("HistoryDrawer",{attrs:{"append-to-body":"",title:"个人信息",history:{nestDrawer2:!0}},model:{value:t.visible6,callback:function(i){t.visible6=i},expression:"visible6"}},[t._v(" 性别：男"),i("br"),i("br"),t._v(" 爱好：女"),i("br"),i("br"),i("el-button",{on:{click:function(i){t.visible7=!t.visible7}}},[t._v("兴趣爱好")]),t._v("   "),i("router-link",{attrs:{to:"/A"}},[i("el-button",{attrs:{type:"success"}},[t._v("跳转页面")])],1),i("HistoryDialog",{attrs:{"append-to-body":"",title:"兴趣爱好",history:{nestDialog1:!0}},model:{value:t.visible7,callback:function(i){t.visible7=i},expression:"visible7"}},[t._v(" 唱、跳、rap、篮球"),i("br"),i("br"),i("router-link",{attrs:{to:"/A"}},[i("el-button",{attrs:{type:"success"}},[t._v("跳转页面")])],1)],1)],1)],1),i("el-divider"),i("Demo")],1)},l=[],r=function(){var t=this,i=t._self._c;return i("el-drawer",t._g(t._b({attrs:{title:t.title,visible:t.dialogVisible,"custom-class":`history-dialog ${t.firstOpen&&"history-dialog_no-anim"}`},on:{"update:visible":function(i){t.dialogVisible=i}}},"el-drawer",t.$attrs,!1),t.$listeners),[t._t("default")],2)},o=[],n={model:{prop:"visible",event:"visibleChange"},props:{visible:{type:Boolean,default:!1},history:{type:Object},auto:{type:Boolean,default:!0}},data(){return{firstOpen:!1}},computed:{dialogVisible:{get(){return this.visible},set(t){this.$emit("visibleChange",t)}}},methods:{checkAutoOpen(){this.auto&&this.hasHistoryInQuery()&&(this.dialogVisible=!0,this.firstOpen=!0)},handlePopupOpen(){this.addHistory()},handlePopupClose(){!this.autoTriggleClose&&this.hasHistoryInQuery()&&(this.hasOpenRecord?this.$router.go(-1):this.removeHistory(),console.log("手动关闭弹窗")),this.firstOpen=!1,this.autoTriggleClose=!1,this.hasOpenRecord=!1},hasHistoryInQuery(){if(!this.history)return!1;const{query:t}=this.$route;return Object.keys(this.history).some((i=>!!t[i]))},addHistory(){this.hasHistoryInQuery()||(this.$router.push({query:{...this.$route.query,...this.history}}),this.hasOpenRecord=!0,console.log("手动打开弹窗"))},removeHistory(){if(!this.history)return;const t={};Object.keys(this.history).forEach((i=>{t[i]=void 0})),this.$router.replace({query:{...this.$route.query,...t}})}},watch:{"$route.query"(){if(!this.history)return;const t=this.hasHistoryInQuery();if(!t&&this.dialogVisible)return this.dialogVisible=!1,this.autoTriggleClose=!0,this.$emit("autoClose"),void console.log("自动关闭弹窗");t&&!this.dialogVisible&&(this.dialogVisible=!0,this.hasOpenRecord=!0,this.$emit("autoOpen"),console.log("自动打开弹窗"))},dialogVisible(t){t?this.handlePopupOpen():this.handlePopupClose()}},created(){this.dialogVisible?this.handlePopupOpen():this.checkAutoOpen()}},a={name:"HistoryDrawer",mixins:[n],props:{title:{type:String}}},u=a,b=e(1001),c=(0,b.Z)(u,r,o,!1,null,null,null),d=c.exports,v=function(){var t=this,i=t._self._c;return i("el-dialog",t._g(t._b({attrs:{visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i}}},"el-dialog",t.$attrs,!1),t.$listeners),[t._t("title",(function(){return[t._v(t._s(t.title))]}),{slot:"title"}),t._t("default")],2)},h=[],p={name:"HistoryDialog",mixins:[n],props:{title:{type:String}}},y=p,_=(0,b.Z)(y,v,h,!1,null,null,null),m=_.exports,f=function(){var t=this,i=t._self._c;return i("a-drawer",t._g(t._b({attrs:{visible:t.dialogVisible,width:"50%",title:t.title},on:{close:function(i){t.dialogVisible=!1}}},"a-drawer",t.$attrs,!1),t.$listeners),[t._t("default")],2)},g=[],k={name:"HistoryAntDrawer",mixins:[n],props:{title:{type:String}}},w=k,D=(0,b.Z)(w,f,g,!1,null,null,null),H=D.exports,x=function(){var t=this,i=t._self._c;return i("a-modal",t._g(t._b({model:{value:t.dialogVisible,callback:function(i){t.dialogVisible=i},expression:"dialogVisible"}},"a-modal",t.$attrs,!1),t.$listeners),[t._t("title",(function(){return[t._v(t._s(t.title))]}),{slot:"title"}),t._t("default")],2)},$=[],O={name:"HistoryAntModal",mixins:[n],props:{title:{type:String}}},V=O,A=(0,b.Z)(V,x,$,!1,null,null,null),I=A.exports,C=function(){var t=this,i=t._self._c;return i("div",[i("h2",[t._v("Demo")]),i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[i("el-table-column",{attrs:{prop:"id",label:"id"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{prop:"desc",label:"详情"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.onEdit(e)}}},[t._v("详情")])]}}])})],1)],1),i("HistoryDrawer",{attrs:{title:t.curItem.name,history:{id:t.curItem.id},auto:!1},on:{"auto-open":t.initDrawer},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[t._v(" id："+t._s(t.curItem.id)+" "),i("br"),i("br"),t._v(" 姓名："+t._s(t.curItem.name)+" "),i("br"),i("br"),t._v(" 详情："+t._s(t.curItem.desc)+" "),i("br"),i("br"),i("br"),i("br"),i("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("刷新页面")]),t._v("   "),i("router-link",{attrs:{to:"/A"}},[i("el-button",{attrs:{type:"success"}},[t._v("跳转页面")])],1)],1)],1)},S=[],q={name:"demo",components:{HistoryDrawer:d},data(){return{list:[],curItem:{},visible:!1,loading:!1}},computed:{id(){return this.$route.query.id}},methods:{fetchList(){this.loading=!0,setTimeout((()=>{this.loading=!1,this.list=[{id:1,name:"张三",desc:"打球很厉害"},{id:2,name:"李四",desc:"唱歌很厉害"}],this.initDrawer()}),1e3)},initDrawer(){this.id&&(this.curItem=this.list.find((t=>String(t.id)===String(this.id))),this.visible=!0)},onEdit(t){this.curItem=t,this.visible=!0},refresh(){window.location.reload()}},created(){this.fetchList()}},Z=q,E=(0,b.Z)(Z,C,S,!1,null,"6edaaf3b",null),P=E.exports,Q={name:"home",components:{HistoryDrawer:d,HistoryDialog:m,HistoryAntDrawer:H,HistoryAntModal:I,Demo:P},data(){return{visible:!1,visible2:!1,visible3:!1,visible4:!1,visible5:!1,visible6:!1,visible7:!1,visible8:!1}}},M=Q,R=(0,b.Z)(M,s,l,!1,null,"592330f1",null),T=R.exports}}]);
//# sourceMappingURL=837.fbdfd8c1.js.map